---
title: fun with dplyr
author: Patrick
date: '2017-07-27'
slug: fun-with-dplyr
categories:
  - R
tags: ["dplyr"]
---



<div id="the-dplyr-package" class="section level2">
<h2>The dplyr package</h2>
<p>this post will show the basics of the dplyr package. There are a lot of helper functions inside the pacakge, but the main function, which it is all about, are just five.</p>
<p>They are: select, filter, mutate, summarize, arrange</p>
<p>Letâ€™s have a look at these functions and also have a look at the new datasets in the current release of the package. So, there seems to be a datasets of storms</p>
<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## Attache Paket: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>dplyr::storms</code></pre>
<pre><code>## # A tibble: 10,010 x 13
##     name  year month   day  hour   lat  long              status category
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;               &lt;chr&gt;    &lt;ord&gt;
##  1   Amy  1975     6    27     0  27.5 -79.0 tropical depression       -1
##  2   Amy  1975     6    27     6  28.5 -79.0 tropical depression       -1
##  3   Amy  1975     6    27    12  29.5 -79.0 tropical depression       -1
##  4   Amy  1975     6    27    18  30.5 -79.0 tropical depression       -1
##  5   Amy  1975     6    28     0  31.5 -78.8 tropical depression       -1
##  6   Amy  1975     6    28     6  32.4 -78.7 tropical depression       -1
##  7   Amy  1975     6    28    12  33.3 -78.0 tropical depression       -1
##  8   Amy  1975     6    28    18  34.0 -77.0 tropical depression       -1
##  9   Amy  1975     6    29     0  34.4 -75.8      tropical storm        0
## 10   Amy  1975     6    29     6  34.0 -74.8      tropical storm        0
## # ... with 10,000 more rows, and 4 more variables: wind &lt;int&gt;,
## #   pressure &lt;int&gt;, ts_diameter &lt;dbl&gt;, hu_diameter &lt;dbl&gt;</code></pre>
</div>
<div id="filter" class="section level2">
<h2>filter</h2>
<p>Let us start with the filter function. The idea of the filter function is very easy. You filter out observations which fullfill a given critera. If we have a look at the data above, what is a possible criteria? One obvious criteria is to filter out a given year.</p>
<pre class="r"><code>filter(storms, year == 1975)</code></pre>
<pre><code>## # A tibble: 86 x 13
##     name  year month   day  hour   lat  long              status category
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;               &lt;chr&gt;    &lt;ord&gt;
##  1   Amy  1975     6    27     0  27.5 -79.0 tropical depression       -1
##  2   Amy  1975     6    27     6  28.5 -79.0 tropical depression       -1
##  3   Amy  1975     6    27    12  29.5 -79.0 tropical depression       -1
##  4   Amy  1975     6    27    18  30.5 -79.0 tropical depression       -1
##  5   Amy  1975     6    28     0  31.5 -78.8 tropical depression       -1
##  6   Amy  1975     6    28     6  32.4 -78.7 tropical depression       -1
##  7   Amy  1975     6    28    12  33.3 -78.0 tropical depression       -1
##  8   Amy  1975     6    28    18  34.0 -77.0 tropical depression       -1
##  9   Amy  1975     6    29     0  34.4 -75.8      tropical storm        0
## 10   Amy  1975     6    29     6  34.0 -74.8      tropical storm        0
## # ... with 76 more rows, and 4 more variables: wind &lt;int&gt;, pressure &lt;int&gt;,
## #   ts_diameter &lt;dbl&gt;, hu_diameter &lt;dbl&gt;</code></pre>
<p>You will regularly forget the second equal sign, when checking for equality, but otherwise the function looks pretty easy. You put in the dataset storms as the first argument and then write the critera you will filter for. Look at the function and speak after me: We filter the storms dataset for observations where the variable year equals 1975</p>
<p>Of course we can imagine a few different criteras. Think about what happens and then run it for yourself.</p>
<pre class="r"><code>filter(storms, status == &quot;tropical storm&quot;, wind &gt; 50)</code></pre>
</div>
<div id="mutate" class="section level2">
<h2>mutate</h2>
<p>After we selected the right observations with the filter function, we oftentimes need to change some variable or create a new variable. This is the job for the mutate function. The mutate function is the nicest thing you will come across, keep it close in your comming R adventures.</p>
</div>
