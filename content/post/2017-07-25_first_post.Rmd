---
title: "First Post"
author: "Patrick"
date: "2017-07-25"
categories: ["R"]
tags: ["RMarkdown", "stringi"]
draft: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## First Post

Hallo zusammen, 

## Stringi
als Erstes schauen wir uns an, wie das mit den Charclasses in dem stringi-package funktioniert. ich möchte alle Sonderzeichen entfernen. Dafür gibt es die passenden `_replace_` funktionen. Da wir wissen, dass wir Sonderzeichen entfernen wollen, wählen das Argument charclass. Die stringi Funktionen haben zum einen die charclasse / fixed / regexp als Argument oder wie im folgenden Beispiel als Teil des Funktionsnamen: 

```{r stringr}
library(stringi)
beispiel <- "IchBin#a92#"
stringi::stri_replace_all_charclass(beispiel, pattern = "[^a-zA-Z]", "")
```
Das hat ja schonmal geklappt. Jetzt suchen wir noch den passenden Charclass für alle Zeichen, die keine Buchstaben sind. 

```{r}
bsp2 <- "a"
bsp_vec <- c("Haasdj2ßd#", "q2ß439ru qwdf")
stringi::stri_extract_all_charclass(beispiel, pattern = "[\\p{numeric_value = 9}]", merge = TRUE) 
```
If we now apply our skills to vector we see that the result is a list. Everytime a list is the result i have difficulties working with the result. For example i want a vector of the result merged together as one string
```{r}
stringi::stri_extract_all_charclass(bsp_vec, pattern = "[\\p{Lc}]", merge = TRUE) %>% 
  map(paste, sep = " ")
```
Why, did this not work? And how do we check what is happening inside the map command?

The reason is that paste takes each character vector as one argument and would paste it to another. Take a look:
```{r}
paste0(c("dre", "zwo"), "dre")
```

so, but how do we archive our goal and give paste the character vector and join it togehter?

Fortunatley there is an argument for this situation in the paste function. It is called collapse
```{r}
paste0(c("dre", "zwo"), collapse = " ")
```

```{r}
res <- stringi::stri_extract_all_charclass(bsp_vec, pattern = "[\\p{Lc}]", merge = TRUE)
```

And we are at our aim.
```{r}
map_chr(res, paste, collapse = " ")
```

Thanks for listening. Talk to you tomorrow